<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>S32 SDK: Power Manager Driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top" style="height:auto; width:100%"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <img id="projectlogo" style="height:auto; width:100%" alt="Logo" src="s32sdk_logo_small.jpg"/>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__power__manager__s32k1xx.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Power Manager Driver<div class="ingroups"><a class="el" href="group__power__manager.html">Power Manager</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p>This module covers the device-specific power_manager functionality implemented for S32K1xx, s32k14xW and S32MTV SOC. </p>
<h2>Hardware background</h2>
<p>System mode controller (SMC) is passing the system into and out of all low-power Stop and Run modes.<br />
 Controls the power, clocks and memories of the system to achieve the power consumption and functionality of that mode.</p>
<h2>Driver consideration</h2>
<p>Power mode entry and sleep-on-exit-value are provided at initialization time through the power manager user configuration structure.<br />
With platform is S32K14x, the available power mode entries are the following ones: HSRUN, RUN, VLPR, STOP1, STOP2 and VLPS.<br />
With platform is S32MTV,S32K11x and S32K14xW. The available power mode entries are the following ones: RUN, VLPR, STOP1, STOP2 and VLPS.</p>
<p>This is an example of configuration: </p><div class="fragment"><div class="line"><a class="code" href="structpower__manager__user__config__t.html">power_manager_user_config_t</a> pwrMan1_InitConfig0 = {</div>
<div class="line">    .<a class="code" href="structpower__manager__user__config__t.html#a2a74ca6388d8535f01910006dd2ad13c">powerMode</a> = <a class="code" href="group__power__s32k1xx.html#gga307c693b6f883df898b9210262755d40a770bfeca511bc93d12836b14a940f774">POWER_MANAGER_RUN</a>,</div>
<div class="line">    .sleepOnExitValue = <span class="keyword">false</span>,</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><a class="code" href="structpower__manager__user__config__t.html">power_manager_user_config_t</a> *powerConfigsArr[] = {</div>
<div class="line">    &amp;pwrMan1_InitConfig0</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><a class="code" href="structpower__manager__callback__user__config__t.html">power_manager_callback_user_config_t</a> * powerCallbacksConfigsArr[] = {(<span class="keywordtype">void</span> *)0};</div>
<div class="line"></div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="status_8h.html#af9bff8ff1154a04a899276af806b8586a83da0606125c0dc2fe0544cb2c383cb9">STATUS_SUCCESS</a> != <a class="code" href="group__power__manager.html#ga85f9813bd7b94c5a81d7f3c050960230">POWER_SYS_Init</a>(&amp;powerConfigsArr,1,&amp;powerCallbacksConfigsArr,0)) {</div>
<div class="line">    ...</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span> {</div>
<div class="line">    ...</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="status_8h.html#af9bff8ff1154a04a899276af806b8586a83da0606125c0dc2fe0544cb2c383cb9">STATUS_SUCCESS</a> != <a class="code" href="group__power__manager.html#ga80453a80475225741b47ed43d3e6c50e">POWER_SYS_SetMode</a>(0,<a class="code" href="group__power__manager.html#gga557e8588368b90f97ba0a6fff173a447a9cc001b4b0a7f1a22e30ba9088222ffb">POWER_MANAGER_POLICY_AGREEMENT</a>)) {</div>
<div class="line">    ...</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span> {</div>
<div class="line">    ...</div>
<div class="line">}</div>
</div><!-- fragment --><h3>Compilation units</h3>
<p>The following files need to be compiled in the project: </p><pre class="fragment">${S32SDK_PATH}\platform\drivers\src\power_manager.c
${S32SDK_PATH}\platform\drivers\src\S32K1xx\power_manager_S32K1xx.c
${S32SDK_PATH}\platform\drivers\src\S32K1xx\power_smc_hw_access.c
</pre><h3>Include path</h3>
<p>The following paths need to be added to the include path of the toolchain: </p><pre class="fragment">${S32SDK_PATH}\platform\drivers\inc\
${S32SDK_PATH}\platform\drivers\src\power\
${S32SDK_PATH}\platform\drivers\src\power\S32K1xx\
</pre><h3>Compile symbols</h3>
<p>No special symbols are required for this component</p>
<h3>Dependencies</h3>
<p><a class="el" href="group__clock__manager.html">Clock Manager</a></p>
<h2>Important Note</h2>
<ol type="1">
<li>ERR01077: The SCG_RCCR[SCS] and SCG_HCCR[SCS] may have a corrupted status during the interval by the software to ensure when the system clock is switching.<br />
 This errata did workaround by the SCS field was read twice the system clock switch has completed.<br />
 The clock configuration is not immediately updated after MCU switched from very low power mode to run or high speed mode. It may be taking longer time than expected.</li>
<li>The power manager driver will disable SPLL, FIRC, SOSC source in RUN mode before MCU jumps from RUN,HSRUN to very low power mode.<br />
 SIRC is clock source when MCU enters very low power mode. Driver will update initialize system clock configuration when MCU jumps to RUN or HSRUN mode again.<br />
It will enable all clock source again which is configured by clock configurations. This is executed when user calls the POWER_SYS_SetMode function for RUN or HSRUN.</li>
<li>When MCU switches from HSRUN to STOP or VLP mode, the driver code will auto switch RUN mode before MCU enters next mode.</li>
<li>Users need to take care peripherals clock frequency via SPLLDIVx_CLK, SIRCDIVx_CLK after MCU switched power mode.<br />
Clock configuration can be re-initialized when MCU returns to RUN mode. This way will make sure the clock for all peripherals. </li>
</ol>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Jun 11 2021 08:16:08 for S32 SDK by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
