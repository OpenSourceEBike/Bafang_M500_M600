<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>S32 SDK: Memory Protection Unit (MPU)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top" style="height:auto; width:100%"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <img id="projectlogo" style="height:auto; width:100%" alt="Logo" src="s32sdk_logo_small.jpg"/>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__mpu.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a>  </div>
  <div class="headertitle">
<div class="title">Memory Protection Unit (MPU)</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The S32 SDK provides Peripheral Driver for the Memory Protection Unit (MPU) module of S32 SDK devices. </p>
<p>The memory protection unit (MPU) provides hardware access control for all memory references generated in the device.<br />
 </p><h2>Hardware background</h2>
<p>The MPU concurrently monitors all system bus transactions and evaluates their appropriateness using pre-programmed region descriptors that define memory spaces and their access rights. Memory references that have sufficient access control rights are allowed to complete, while references that are not mapped to any region descriptor or have insufficient rights are terminated with a protection error response.</p>
<p>The MPU implements a two-dimensional hardware array of memory region descriptors and the crossbar slave ports to continuously monitor the legality of every memory reference generated by each bus master in the system.</p>
<p>The feature set includes:</p><ul>
<li>8(16 for S32K148) program-visible 128-bit region descriptors, accessible by four 32-bit words each<ul>
<li>Each region descriptor defines a modulo-32 byte space, aligned anywhere in memory<ul>
<li>Region sizes can vary from 32 bytes to 4 Gbytes</li>
</ul>
</li>
<li>Two access control permissions defined in a single descriptor word<ul>
<li>Masters 0–3: read, write, and execute attributes for supervisor and user accesses</li>
<li>Masters 4–7: read and write attributes</li>
</ul>
</li>
<li>Hardware-assisted maintenance of the descriptor valid bit minimizes coherency issues</li>
<li>Alternate programming model view of the access control permissions word</li>
<li>Priority given to granting permission over denying access for overlapping region descriptors</li>
</ul>
</li>
<li>Detects access protection errors if a memory reference does not hit in any memory region, or if the reference is illegal in all hit memory regions. If an access error occurs, the reference is terminated with an error response, and the MPU inhibits the bus cycle being sent to the targeted slave device.</li>
<li>Error registers, per slave port, capture the last faulting address, attributes, and other information</li>
<li>Global MPU enable/disable control bit</li>
</ul>
<p><b>Logical Bus Master Assignments and Possible Access Types</b> </p><table class="doxtable">
<tr>
<th align="center">ID </th><th align="center">Master </th><th align="center">User</th><th align="center">Supervisor</th><th align="center">Data</th><th align="center">Instruction</th><th align="center">Read</th><th align="center">Write</th><th align="center">Execute</th><th align="center">PID  </th></tr>
<tr>
<td align="center">0 </td><td align="center">Core </td><td align="center">x </td><td align="center">x </td><td align="center">x </td><td align="center">x </td><td align="center">x </td><td align="center">x </td><td align="center">x </td><td align="center">x </td></tr>
<tr>
<td align="center">1 </td><td align="center">Debugger </td><td align="center">x </td><td align="center">x </td><td align="center">x </td><td align="center">x </td><td align="center">x </td><td align="center">x </td><td align="center">x </td><td align="center">x </td></tr>
<tr>
<td align="center">2 </td><td align="center">DMA </td><td align="center"></td><td align="center">x </td><td align="center">x </td><td align="center"></td><td align="center">x </td><td align="center">x </td><td align="center"></td><td align="center"></td></tr>
<tr>
<td align="center">3 </td><td align="center">ENET </td><td align="center">x </td><td align="center"></td><td align="center">x </td><td align="center"></td><td align="center">x </td><td align="center">x </td><td align="center"></td><td align="center"></td></tr>
</table>
<table class="doxtable">
<tr>
<th align="center">ID </th><th align="center">S32K1xx</th><th align="center">S32MTV</th><th align="center">S32K1xxW  </th></tr>
<tr>
<td align="center">0 </td><td align="center">x </td><td align="center">x </td><td align="center">x </td></tr>
<tr>
<td align="center">1 </td><td align="center">x </td><td align="center">x </td><td align="center">x </td></tr>
<tr>
<td align="center">2 </td><td align="center">x </td><td align="center">x </td><td align="center">x </td></tr>
<tr>
<td align="center">3 </td><td align="center">x(1) </td><td align="center"></td><td align="center">x(1) </td></tr>
</table>
<p>1: S32K148 only.</p>
<p><b>Logical Slave Port Assignments</b> </p><table class="doxtable">
<tr>
<th align="center">Port </th><th align="center">Source </th><th align="center">Destination  </th></tr>
<tr>
<td align="center">0 </td><td align="center">Crossbar slave port 0 </td><td align="center">Flash Controller </td></tr>
<tr>
<td align="center">1 </td><td align="center">Crossbar slave port 1 </td><td align="center">SRAM backdoor </td></tr>
<tr>
<td align="center">2 </td><td align="center">Code Bus </td><td align="center">SRAM_L frontdoor </td></tr>
<tr>
<td align="center">3 </td><td align="center">System Bus </td><td align="center">SRAM_U frontdoor </td></tr>
<tr>
<td align="center">4 </td><td align="center">Crossbar slave port 3 </td><td align="center">QuadSPI </td></tr>
</table>
<table class="doxtable">
<tr>
<th align="center">Port </th><th align="center">S32K11x</th><th align="center">S32K14x</th><th align="center">S32MTV</th><th align="center">S32K1xxW  </th></tr>
<tr>
<td align="center">0 </td><td align="center">x </td><td align="center">x </td><td align="center">x </td><td align="center">x </td></tr>
<tr>
<td align="center">1 </td><td align="center">x(1) </td><td align="center">x </td><td align="center">x </td><td align="center">x </td></tr>
<tr>
<td align="center">2 </td><td align="center"></td><td align="center">x </td><td align="center">x </td><td align="center">x </td></tr>
<tr>
<td align="center">3 </td><td align="center"></td><td align="center">x </td><td align="center">x </td><td align="center">x </td></tr>
<tr>
<td align="center">4 </td><td align="center"></td><td align="center">x(2) </td><td align="center"></td><td align="center">x(2) </td></tr>
</table>
<p>1: Destination: SRAM controller/MTB/DWT/MCM. 2: S32K148 only.</p>
<h2>AHB-AP</h2>
<p>AHB-AP provides the debugger access to all memory and registers in the system.<br />
 The MPU includes default settings and protections for the Region Descriptor 0 (RGD0) such that the Debugger always has access to the entire address space and those rights cannot be changed by the core or any other bus master.</p>
<h2>ERRATA</h2>
<ul>
<li>S32K148:<ul>
<li>E11109: The MPU requires a special programming sequence to protect the QSPI space as it is unable to see the two MSB bits of the QSPI address on slave port 4.<br />
 This programming sequence requires 2 Region Descriptors [RGDx]:<ul>
<li>One will cover the region 0x280x_xxxx and the other one will cover region 0x680x_xxxx.</li>
<li>When any master without permissions tries to access region 0x680x_xxxx, an error will be captured in both, EDR3 and EDR4 registers. Moreover, the address of the failed access is captured on EAR3 and EAR4 registers. However, EAR3 will capture the address 0x680x_xxxx, which is the one that belongs to the QSPI space. While EAR4 will capture the 0x280x_xxxx address.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2>Note</h2>
<ul>
<li>S32K14x, S32K14xW:<ul>
<li>In order to protect cache data, AHB LMEM will distribute all transactions to MPU slave port 2 for any access to the whole cacheable code bus memory domain.<ul>
<li>If there is a Pflash access protection error by CM4, both slave port 0 &amp; slave port 2 will report the same error. </li>
</ul>
</li>
</ul>
</li>
</ul>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__mpu__drv"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mpu__drv.html">MPU Driver</a></td></tr>
<tr class="memdesc:group__mpu__drv"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory Protection Unit Peripheral Driver. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Jun 11 2021 08:16:08 for S32 SDK by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
