<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>S32 SDK: System Basis Chip Driver (SBC) - UJA116xA Family</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top" style="height:auto; width:100%"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <img id="projectlogo" style="height:auto; width:100%" alt="Logo" src="s32sdk_logo_small.jpg"/>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__sbc__uja116x.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a>  </div>
  <div class="headertitle">
<div class="title">System Basis Chip Driver (SBC) - UJA116xA Family</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>System Basis Chip driver is a middleware driver for SBC settings and control. </p>
<h2>Hardware background</h2>
<p>The UJA116xA is a mini high-speed CAN System Basis Chip (SBC) containing an ISO 11898-2:201x compliant HS-CAN transceiver and an integrated 5 V or 3.3 V 250 mA scalable supply (V1) for a microcontroller and/or other loads. It also features a watchdog and a Serial Peripheral Interface (SPI). The UJA116xA can be operated in very low-current Standby and Sleep modes with bus and local wake-up capability. The UJA1169A comes in six variants. The UJA1169ATK, UJA1169ATK/F, UJA1169ATK/X and UJA1169ATK/X/F contain a 5 V regulator (V1). V1 is a 3.3 V regulator in the UJA1169ATK/3 and the UJA1169ATK/F/3. The UJA1169ATK, UJA1169ATK/F, UJA1169ATK/3 and UJA1169ATK/F/3 variants feature a second on-board 5 V regulator (V2) that supplies the internal CAN transceiver and can also be used to supply additional on-board hardware. The UJA1169ATK/X and UJA1169ATK/X/F are equipped with a 5 V supply (VEXT) for off-board components. VEXT is short-circuit proof to the battery, ground and negative voltages. The integrated CAN transceiver is supplied internally via V1, in parallel with the microcontroller. The UJA1168 comes in four variants. The UJA1168ATK, UJA1168ATK/FD, UJA1168ATK/VX and UJA1168ATK/VX/FD contain a 5 V regulator (V1). The UJA1168ATK and UJA1168ATK/FD versions contain a battery-related high-voltage output (INH) for controlling an external voltage regulator, while the UJA1168ATK/VX and UJA1168ATK/VX/FD are equipped with a 5 V sensor supply (VEXT). The UJA1169xx/F and UJA1168xx/FD variants support ISO 11898 compliant CAN partial networking with a selective wake-up function incorporating CAN FD-passive. CAN FD-passive is a feature that allows CAN FD bus traffic to be ignored in Sleep/Standby mode. CAN FD-passive partial networking is the perfect fit for networks that support both CAN FD and classic CAN communications. It allows normal CAN controllers that do not need to communicate CAN FD messages to remain in partial networking Sleep/Standby mode during CAN FD communication without generating bus errors. The UJA116xA implements the standard CAN physical layer as defined in the current ISO11898 standard (-2:2003, -5:2007, -6:2013). A dedicated LIMP output pin is provided to flag system failures on UJA1169 variants. A number of configuration settings are stored in non-volatile memory. This arrangement makes it possible to configure the power-on and limp-home behavior of the UJA116xA to meet the requirements of different applications.</p>
<h2>How to use SBC driver in your application</h2>
<p>In order to set up SBC device the user needs to configure <a class="el" href="structsbc__int__config__t.html" title="Init configuration structure. This structure is used for initialization of sbc. ">sbc_int_config_t</a> structure in which are included following structures: <a class="el" href="structsbc__regulator__ctr__t.html" title="Regulator control register group. This structure is group of regulator settings. ">sbc_regulator_ctr_t</a>, <a class="el" href="structsbc__wtdog__ctr__t.html" title="Watchdog control register structure. Watchdog configuration structure. ">sbc_wtdog_ctr_t</a>, sbc_mode_mc_t, sbc_fail_safe_lhc_t, <a class="el" href="structsbc__sys__evnt__t.html" title="System event capture enable register structure. This structure enables or disables overtemperature wa...">sbc_sys_evnt_t</a>, sbc_lock_t, <a class="el" href="structsbc__can__conf__t.html" title="CAN configuration group structure. This structure configure CAN peripheral behavior. ">sbc_can_conf_t</a>, <a class="el" href="structsbc__wake__t.html" title="WAKE pin event capture enable register structure. Local wake-up is enabled via bits WPRE and WPFE in ...">sbc_wake_t</a> These nested structures correspond to individual registers. The <a class="el" href="structsbc__int__config__t.html" title="Init configuration structure. This structure is used for initialization of sbc. ">sbc_int_config_t</a> structure is passed as a parameter to Init function to initialize SBC device. The rest of the functions are related to individual registers.</p>
<h3>Initialization</h3>
<p>The SBC_InitDriver function takes a parameter which is an instance of SPI used for communication with UJA116xA. The SBC_InitDevice function is responsible for setting up the UJA116xA, according to user configuration data which is passed as parameter. The SBC_InitDevice function configures all SBC registers except factories configuration set up in non volatile memory, (Start up control and SBC configuration register.) The SBC_InitDevice function transitions the SBC to standby mode, where the configuration is performed, and then to a mode selected in the main configuration structure. Before the transition to standby mode all event capture registers are cleared. In order to read the pre-reset or wake-up events, use SBC_GetEventsStatus between SBC_InitDriver and SBC_InitDevice.</p>
<h3>Mode transition</h3>
<p>SBC_SetMode performs software transition from one mode to another. The transition is achieved by writing to mode control register. The event capture registers are cleared before device is moved to standby and sleep mode.</p>
<h3>Writing to registers</h3>
<p>In order to write to registers, there are several methods dedicated to some specific registers. These methods (names starting with SBC_Set) take a value or a pointer to structure containing values to be written to particular registers as a parameter. Besides these methods there is also a method SBC_DataTransfer which is common to reading and writing to all registers. It takes three parameters. The first one is an address of a register to be written. Addresses of registers are defined in sbc_register_ t enum. The second argument is pointer to a value which should be sent to a register. The last argument is used for register reading only and its value is unused in this case. NULL pointer is used when parameter is unused.</p>
<h3>Reading from registers</h3>
<p>Content of a register is read by method SBC_DataTransfer, which provides both reading and writing to all registers. This method has three arguments. The first one is an address of a register to be read from, the third one is a pointer to a variable where the content of a register will be stored. Second argument is used for the register writing only and it should be NULL in this case. Addresses of registers are defined in enum sbc_register_t. Several methods to reading specific control and status register are available similarly to the register writing. Their names start with SBC_Get.</p>
<h3>Reading status registers</h3>
<p>Content of status register can be read by method SBC_DataTransfer or using appropriate function which starts with SBC_Get and finishes with Status. Event capture registers must be cleared using SBC_CleanEvents by setting to 1 appropriate status. For clear all events set all statuses to 1 or reading all event capture statuses using SBC_GetEventsStatus before.</p>
<p>There are several functions which read status and store it to structure. The Table 3 sumarize which function reads appropriate status register.</p>
<table class="doxtable">
<tr>
<th>Function name </th><th>Status register  </th></tr>
<tr>
<td>SBC_GetMainStatus </td><td>Main status, Watchdog status </td></tr>
<tr>
<td>SBC_GetSupplyStatus </td><td>V2/VEXT status, V1 status </td></tr>
<tr>
<td>SBC_GetCanStatus </td><td>CAN transceiver status, CAN partial networking error, CAN partial networking status, CAN oscillator status, CAN-bus silence status, VCAN status, CAN failure status </td></tr>
<tr>
<td>SBC_GetWakeStatus </td><td>WAKE pin status </td></tr>
<tr>
<td>SBC_GetEventsStatus </td><td>Global event status, System event status, Supply event status, Transceiver event status, WAKE pin event status </td></tr>
<tr>
<td>SBC_GetAllStatus </td><td>Read all statuses from this table </td></tr>
</table>
<h3>Reading and writing non-volatile SBC configuration</h3>
<p>The UJA116xA contains Multiple Time Programmable Non-Volatile (MTPNV) memory cells that allow some of the default device settings to be reconfigured. This non-volatile memory has limited write access. Programming of the NVM registers is performed in two steps. First, the required values are written. In the second step, reprogramming is confirmed by writing the correct CRC value to the MTPNV CRC control register. This memory is accessed by SBC_GetFactoriesSettings and SBC_ChangeFactoriesSettings methods. The only parameter is a pointer to <a class="el" href="structsbc__factories__conf__t.html" title="Factory configuration structure. It contains Start-up control register and SBC configuration control ...">sbc_factories_conf_t</a> data structure, which should be written to NTPNVM or where should be stored data read out from the NTPNVM. If the device has been programmed previously, the factory presets may need to be restored before reprogramming can begin. When the factory presets have been restored successfully, a system reset is generated automatically and UJA116xA switches back to Forced Normal mode. If SBC_ChangeFactoriesSettings method returns an error “SBC_UJA_NVN_ERROR” it means device was preconfigured from default settings and it is not possible to write to non-volatile memory. Restore factory preset values is needed. Factory preset values are restored if the following conditions apply continuously for at least td(MTPNV) during battery power-up: • pin RSTN is held LOW • CANH is pulled up to VBAT • CANL is pulled down to GND Now SBC_ChangeFactoriesSettings can be used for change factory preset values to custom configuration.</p>
<h3>Error tracking</h3>
<p>If an error during the R/W operations to UJA116xA registers occurs, the driver keeps track of it. If a method returns status different from STATUS_SUCCESS the status represents the type of error from sbc_status_t enum.</p>
<h2>Example code snippets (for FRDM PK144-Q100 freedom board).</h2>
<h3>Initialization example</h3>
<p>This example source code snippet shows how to initialize SPI and the SBC. The SPI instance used in this example is LPSPICOM1. The following structures are generated by the configuration tool or need to be created by the user: lpspiCom1_MasterConfig0, lpspiCom1State, sbc_uja116x_InitConfig0. </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div>
<div class="line">{  </div>
<div class="line">    ...</div>
<div class="line"></div>
<div class="line">    sbc_status_t status = <a class="code" href="status_8h.html#af9bff8ff1154a04a899276af806b8586a83da0606125c0dc2fe0544cb2c383cb9">STATUS_SUCCESS</a>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* Initialization clocks. */</span></div>
<div class="line">    ...</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* Initialize pins. */</span></div>
<div class="line">    ...</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* Initialize LPSPI. */</span></div>
<div class="line">    <a class="code" href="group__lpspi__driver.html#ga0e5d39d2a9fc731c30d6c54166232409">LPSPI_DRV_MasterInit</a>(LPSPICOM1, &amp;lpspiCom1State, &amp;lpspiCom1_MasterConfig0);</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* Initialize SBC. */</span></div>
<div class="line">    status = <a class="code" href="sbc__uja116x__driver_8h.html#a6c0d44b85038752c6776ecb139f92b08">SBC_InitDriver</a>(LPSPICOM1);</div>
<div class="line">    status |= <a class="code" href="sbc__uja116x__driver_8h.html#affaccb48fcb02b56d66317c3dc96c6dc">SBC_InitDevice</a>(&amp;sbc_uja116x_InitConfig0);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(status != <a class="code" href="status_8h.html#af9bff8ff1154a04a899276af806b8586a83da0606125c0dc2fe0544cb2c383cb9">STATUS_SUCCESS</a>)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Do something here. */</span></div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    ...</div>
<div class="line">}</div>
</div><!-- fragment --> <pre class="fragment">### Write to Regulator control registers example ###
This example source code snippet shows how to configure Regulator control register.
Power distribution control (PDC), V2/VEXT configuration (V2C/ VETXT), V1 reset threshold can be 
configured by writing to Regulator Control register.
Note: PDC can be set for UJA1169 variants (not UJA1168),
V2 can be set for models UJA1169ATK, UJA1169ATK/3, UJA1169ATK/F and UJA1169ATK/F/3,
VEXT can be set for models UJA1169ATK/X and UJA1169ATK/X/F. For more info read function description.
</pre> <div class="fragment"><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div>
<div class="line">{  </div>
<div class="line">    ...</div>
<div class="line"></div>
<div class="line">    sbc_status_t status = <a class="code" href="status_8h.html#af9bff8ff1154a04a899276af806b8586a83da0606125c0dc2fe0544cb2c383cb9">STATUS_SUCCESS</a>;</div>
<div class="line">    <a class="code" href="structsbc__regulator__ctr__t.html">sbc_regulator_ctr_t</a> regulator;</div>
<div class="line">    regulator.<a class="code" href="structsbc__regulator__ctr__t.html#a84c6859f805be0bdbd1937d041e0cb80">regulator</a>.<a class="code" href="structsbc__regulator__t.html#a13cf2ff62fa91eec0693a2049ff02bb5">pdc</a> = <a class="code" href="group__sbc__uja116x__driver.html#gga151e1810d93549211322004963e568b7ab3c87abbfb79ee3b72f49341f1de0c17">SBC_UJA_REGULATOR_PDC_HV</a>;</div>
<div class="line">    regulator.<a class="code" href="structsbc__regulator__ctr__t.html#a84c6859f805be0bdbd1937d041e0cb80">regulator</a>.<a class="code" href="structsbc__regulator__t.html#a6d2a120fa2d68e1a48845621dbd12464">v2c</a> = <a class="code" href="group__sbc__uja116x__driver.html#gga406d1c71f02c6c8ed3716365fe556274a87950fc72b1369dff388ebdfca2be97f">SBC_UJA_REGULATOR_V2C_OFF</a>;</div>
<div class="line">    regulator.<a class="code" href="structsbc__regulator__ctr__t.html#a84c6859f805be0bdbd1937d041e0cb80">regulator</a>.<a class="code" href="structsbc__regulator__t.html#af4f5e82a935e1ed45446ef84a80f6a5c">v1rtc</a> = <a class="code" href="group__sbc__uja116x__driver.html#gga99b58e9ee93da53e2449f845d160fddba7c936ea84a59287acbd1a098460cb878">SBC_UJA_REGULATOR_V1RTC_80</a>;</div>
<div class="line"></div>
<div class="line">    regulator.<a class="code" href="structsbc__regulator__ctr__t.html#a890e9e8d5c145c52b44f436b03f23384">supplyEvnt</a>.<a class="code" href="structsbc__supply__evnt__t.html#a5230b46ca0f3d1f11b352a8a53bb36f1">v2oe</a> = <a class="code" href="group__sbc__uja116x__driver.html#ggac54c64925179e239e9536891567dbb5cad8e0a3f2afa92856141e7a75b416a6df">SBC_UJA_SUPPLY_EVNT_V2OE_EN</a>;</div>
<div class="line">    regulator.<a class="code" href="structsbc__regulator__ctr__t.html#a890e9e8d5c145c52b44f436b03f23384">supplyEvnt</a>.<a class="code" href="structsbc__supply__evnt__t.html#a664c3bc78a342466ff2ed87d4fe39f02">v2ue</a> = <a class="code" href="group__sbc__uja116x__driver.html#ggac0d4f287f3150e805f530df748c62194ad7ec22007277dfb8d512d867384084c4">SBC_UJA_SUPPLY_EVNT_V2UE_EN</a>;</div>
<div class="line">    regulator.<a class="code" href="structsbc__regulator__ctr__t.html#a890e9e8d5c145c52b44f436b03f23384">supplyEvnt</a>.<a class="code" href="structsbc__supply__evnt__t.html#a66e2821f56a790175c359fe91e5b489a">v1ue</a> = <a class="code" href="group__sbc__uja116x__driver.html#gga05448388cfecd25168557f4bbb2086bda172794b680845fd7b528cb2eb919acc7">SBC_UJA_SUPPLY_EVNT_V1UE_DIS</a>;</div>
<div class="line"></div>
<div class="line">    status = <a class="code" href="sbc__uja116x__driver_8h.html#ac5ae0462b7d1daf222c2cf2c79e22aae">SBC_SetVreg</a>(&amp;regulator);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(status != <a class="code" href="status_8h.html#af9bff8ff1154a04a899276af806b8586a83da0606125c0dc2fe0544cb2c383cb9">STATUS_SUCCESS</a>)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Do something here. */</span></div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    ...</div>
<div class="line">}</div>
</div><!-- fragment --><h3>Read from Regulator control registers example</h3>
<p>This example source code snippet shows how to read from Regulator control registers. Reading Regulator control register gives information about Power distribution control (PDC), V2/VEXT configuration (V2C/ VETXT), V1 reset threshold current configuration. Using this method can be useful for check if the Regulator control register is configured correctly. For more info read function description. </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div>
<div class="line">{  </div>
<div class="line">    ...</div>
<div class="line"></div>
<div class="line">    sbc_status_t status = <a class="code" href="status_8h.html#af9bff8ff1154a04a899276af806b8586a83da0606125c0dc2fe0544cb2c383cb9">STATUS_SUCCESS</a>;</div>
<div class="line">    <a class="code" href="structsbc__regulator__ctr__t.html">sbc_regulator_ctr_t</a> regulator;</div>
<div class="line"></div>
<div class="line">    status = <a class="code" href="sbc__uja116x__driver_8h.html#a692027f43d2c69d5e90b83a77ac220a9">SBC_GetVreg</a>(&amp;regulator);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(status == <a class="code" href="status_8h.html#af9bff8ff1154a04a899276af806b8586a83da0606125c0dc2fe0544cb2c383cb9">STATUS_SUCCESS</a>)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span>(regulator.<a class="code" href="structsbc__regulator__ctr__t.html#a890e9e8d5c145c52b44f436b03f23384">supplyEvnt</a>.<a class="code" href="structsbc__supply__evnt__t.html#a5230b46ca0f3d1f11b352a8a53bb36f1">v2oe</a> == <a class="code" href="group__sbc__uja116x__driver.html#ggac54c64925179e239e9536891567dbb5cad8e0a3f2afa92856141e7a75b416a6df">SBC_UJA_SUPPLY_EVNT_V2OE_EN</a>)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">/* Do something here. */</span></div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    ...</div>
<div class="line">}</div>
</div><!-- fragment --><h3>Reading all device status example</h3>
<p>This example source code snippet shows how to read all SBC device statuses in one function. Variable allStatuses contains these registers: Main status register, Watchdog status register, Supply voltage status register, Transceiver status register, WAKE pin status register, Event capture registers. For more info read function description. </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div>
<div class="line">{  </div>
<div class="line">    ...</div>
<div class="line"></div>
<div class="line">    sbc_status_t status = <a class="code" href="status_8h.html#af9bff8ff1154a04a899276af806b8586a83da0606125c0dc2fe0544cb2c383cb9">STATUS_SUCCESS</a>;</div>
<div class="line">    <a class="code" href="structsbc__status__group__t.html">sbc_status_group_t</a> allStatuses;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">while</span>(1){</div>
<div class="line"></div>
<div class="line">        status = <a class="code" href="sbc__uja116x__driver_8h.html#ae92713261bc91f589d36acb816ee6809">SBC_GetAllStatus</a>(&amp;allStatuses);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>(status == <a class="code" href="status_8h.html#af9bff8ff1154a04a899276af806b8586a83da0606125c0dc2fe0544cb2c383cb9">STATUS_SUCCESS</a>)</div>
<div class="line">        {</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span>(allStatuses.<a class="code" href="structsbc__status__group__t.html#a40d67eef6b04f83e446e5322b2a47cc3">trans</a>.<a class="code" href="structsbc__trans__stat__t.html#a9503c128875c1aab45d5aaf2360a6a1f">cbss</a> == <a class="code" href="group__sbc__uja116x__driver.html#gga5c51dfe80362e1becb71bca8f8ebf7f4ae9eb1bd17f9ed9521698b046649d67f4">SBC_UJA_TRANS_STAT_CBSS_ACT</a>)</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">/* Do something here. */</span></div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span>(allStatuses.<a class="code" href="structsbc__status__group__t.html#abca34b6064cb676db8005377c6b1cb75">supply</a>.<a class="code" href="structsbc__supply__status__t.html#a20fffcb3e55ba64f758931f2552eeaeb">v1s</a> == <a class="code" href="group__sbc__uja116x__driver.html#gga29a92eac198b23c79a0d18b31a53ed11ae9ee23e4e01ca6ae238f85bccb6133d7">SBC_UJA_SUPPLY_STAT_V1S_VAB</a>)</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">/* Do something here. */</span></div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            ...</div>
<div class="line"></div>
<div class="line">            <span class="comment">/* Periodically feed watchdog (anytime in watchdog period in case of timeout watchdog mode). */</span></div>
<div class="line">            <a class="code" href="sbc__uja116x__driver_8h.html#a5812ff87ceb55fed36f2229bef26ca1c">SBC_FeedWatchdog</a>();</div>
<div class="line">        }</div>
<div class="line">    } </div>
<div class="line">}</div>
</div><!-- fragment --> <h3>Reading Transceiver device status example</h3>
<p>This example source code snippet shows how to read Transceiver device status from SBC. It contains CAN transceiver status, CAN partial networking error, CAN partial networking status, CAN oscillator status, CAN-bus silence status, VCAN status, CAN failure status. For more info read function description. Note similar approach can be used for reading other status using different SBC_Get*Status. </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div>
<div class="line">{  </div>
<div class="line">    ...</div>
<div class="line"></div>
<div class="line">    sbc_status_t status = <a class="code" href="status_8h.html#af9bff8ff1154a04a899276af806b8586a83da0606125c0dc2fe0544cb2c383cb9">STATUS_SUCCESS</a>;</div>
<div class="line">    <a class="code" href="structsbc__trans__stat__t.html">sbc_trans_stat_t</a> transStatus;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">while</span>(1){</div>
<div class="line"></div>
<div class="line">        status = <a class="code" href="sbc__uja116x__driver_8h.html#afc90a811ed60eb90d8bd0ffacb9abb59">SBC_GetCanStatus</a>(&amp;transStatus);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>(status == <a class="code" href="status_8h.html#af9bff8ff1154a04a899276af806b8586a83da0606125c0dc2fe0544cb2c383cb9">STATUS_SUCCESS</a>)</div>
<div class="line">        {</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span>(transStatus.<a class="code" href="structsbc__trans__stat__t.html#a9503c128875c1aab45d5aaf2360a6a1f">cbss</a> == <a class="code" href="group__sbc__uja116x__driver.html#gga5c51dfe80362e1becb71bca8f8ebf7f4ae9eb1bd17f9ed9521698b046649d67f4">SBC_UJA_TRANS_STAT_CBSS_ACT</a>)</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">/* Do something here. */</span></div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            ...</div>
<div class="line"></div>
<div class="line">            <span class="comment">/* Periodically feed watchdog (anytime in watchdog period in case of timeout watchdog mode). */</span></div>
<div class="line">            <a class="code" href="sbc__uja116x__driver_8h.html#a5812ff87ceb55fed36f2229bef26ca1c">SBC_FeedWatchdog</a>();</div>
<div class="line">        }</div>
<div class="line">    } </div>
<div class="line">}</div>
</div><!-- fragment --> <h3>Change factories settings</h3>
<p>This example source code snippet shows how to change factory preset value of non-volatile memmory. Device must be set to fatory preset. For more info read function description. </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div>
<div class="line">{  </div>
<div class="line">    ...</div>
<div class="line"></div>
<div class="line">    sbc_status_t status = <a class="code" href="status_8h.html#af9bff8ff1154a04a899276af806b8586a83da0606125c0dc2fe0544cb2c383cb9">STATUS_SUCCESS</a>;</div>
<div class="line">    <a class="code" href="structsbc__factories__conf__t.html">sbc_factories_conf_t</a> factories;</div>
<div class="line"></div>
<div class="line">    status = <a class="code" href="sbc__uja116x__driver_8h.html#a4b706fb2fffdb0b3ef1fd775b2ff70f7">SBC_GetFactoriesSettings</a>(&amp;factories);</div>
<div class="line"></div>
<div class="line">    factories.<a class="code" href="structsbc__factories__conf__t.html#ac84a13a6d1189e48b805bdfe75500dde">control</a>.<a class="code" href="structsbc__sbc__t.html#a9df5077cb41fce1543e53c9129583ce1">fnmc</a> = <a class="code" href="group__sbc__uja116x__driver.html#gga3697628c6124bae789fe8b5a275f96f1a93415e6bc23860bb16a6331cd6877d3d">SBC_UJA_SBC_SDMC_EN</a>;</div>
<div class="line">    factories.<a class="code" href="structsbc__factories__conf__t.html#ac84a13a6d1189e48b805bdfe75500dde">control</a>.<a class="code" href="structsbc__sbc__t.html#a4a50f4d028c318a1d6e3f41ba5a5c49f">sdmc</a> = <a class="code" href="group__sbc__uja116x__driver.html#gga3697628c6124bae789fe8b5a275f96f1a925beb5e08ca5388b782d674dea55310">SBC_UJA_SBC_SDMC_DIS</a>;</div>
<div class="line">    factories.<a class="code" href="structsbc__factories__conf__t.html#a98a2c0f3d050533ed09b581d1decd6f1">startUp</a>.<a class="code" href="structsbc__start__up__t.html#a4ccafc773a567a0de7e02d9654725e4f">rlc</a> = <a class="code" href="group__sbc__uja116x__driver.html#ggac9f99cff1c6e154580e0b679d20de3ffa3afcf8d13628872f103ec014df07194b">SBC_UJA_START_UP_RLC_20_25p0</a>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(status == <a class="code" href="status_8h.html#af9bff8ff1154a04a899276af806b8586a83da0606125c0dc2fe0544cb2c383cb9">STATUS_SUCCESS</a>)</div>
<div class="line">    {</div>
<div class="line">        status = <a class="code" href="sbc__uja116x__driver_8h.html#a29485e68d9f6a2534edc7843e33755be">SBC_ChangeFactoriesSettings</a>(&amp;factories);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(status != <a class="code" href="status_8h.html#af9bff8ff1154a04a899276af806b8586a83da0606125c0dc2fe0544cb2c383cb9">STATUS_SUCCESS</a>)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Do something here. */</span></div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> <h2>Integration guideline</h2>
<h3>Compilation units</h3>
<p>The following files need to be compiled in the project: </p><pre class="fragment">${S32SDK_PATH}\middleware\sbc\sbc_uja116x\source\sbc_uja116x_driver.c
</pre><h3>Include path</h3>
<p>The following paths need to be added to the include path of the toolchain: </p><pre class="fragment">${S32SDK_PATH}\middleware\sbc\sbc_uja116x\include
</pre><h3>Compile symbols</h3>
<p>No special symbols are required for this component</p>
<h3>Dependencies</h3>
<p><a class="el" href="group__lpspi.html">Low Power Serial Peripheral Interface (LPSPI)</a> <a class="el" href="group__osif.html">OS Interface (OSIF)</a> </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__sbc__uja116x__driver"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sbc__uja116x__driver.html">UJA116xA SBC Driver</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Jun 11 2021 08:16:08 for S32 SDK by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
